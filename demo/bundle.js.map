{"version":3,"sources":["demo-main.ts","auto-scroll.ts","demo/advanced.ts","demo/app.ts","demo/dummy.ts","demo/simple-xy.ts","demo/simple-y.ts","optional-parent.ts","oribella-aurelia-sortable.ts","sortable.ts","utils.ts"],"names":[],"mappings":"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","file":"","sourcesContent":["import 'fuse-box-aurelia-loader';\nimport 'aurelia-bootstrapper';\nimport { Aurelia } from 'aurelia-framework';\n\nexport async function configure(aurelia: Aurelia) {\n  aurelia.use\n         .standardConfiguration()\n         .developmentLogging();\n  aurelia.start().then(() => aurelia.setRoot('demo/app'));\n}\n","import { transient } from 'aurelia-dependency-injection';\nimport { ScrollData } from './utils';\n\n@transient()\nexport class AutoScroll {\n  private rAFId: number = -1;\n  private active = false;\n\n  public activate({ scrollElement, scrollDirection, scrollFrames, scrollSpeed }: ScrollData) {\n    if (this.active) {\n      if (scrollDirection.x === 0 && scrollDirection.y === 0) {\n        window.cancelAnimationFrame(this.rAFId);\n        this.active = false;\n      }\n      return;\n    }\n    if (scrollDirection.x === 0 && scrollDirection.y === 0) {\n      return;\n    }\n\n    if (scrollFrames.x === 0 && scrollFrames.y === 0) {\n      return;\n    }\n\n    const scrollDeltaX = scrollDirection.x * scrollSpeed;\n    const scrollDeltaY = scrollDirection.y * scrollSpeed;\n\n    const autoScroll = () => {\n\n      if (!this.active) {\n        return;\n      }\n      if (scrollFrames.x > 0) {\n        scrollElement.scrollLeft += scrollDeltaX;\n      }\n      if (scrollFrames.y > 0) {\n        scrollElement.scrollTop += scrollDeltaY;\n      }\n\n      --scrollFrames.x;\n      --scrollFrames.y;\n      if (scrollFrames.x <= 0 && scrollFrames.y <= 0) {\n        this.active = false;\n        return;\n      }\n\n      this.rAFId = window.requestAnimationFrame(autoScroll);\n    };\n\n    this.active = true;\n    autoScroll();\n  }\n  public deactivate() {\n    window.cancelAnimationFrame(this.rAFId);\n    this.active = false;\n  }\n}\n","export class Advanced {\n  public groups = [\n    { name: 'Odd', typeFlag: 1, items: [] },\n    { name: 'Even', typeFlag: 2, items: [] },\n    {\n      name: 'Numbers', typeFlag: 3, items: Array.from(Array(11), (_, i) => i).map((i) => {\n        return {\n          name: i === 0 ? 'π' : i,\n          typeFlag: i % 2 === 0 ? 2 : 1,\n          lockedFlag: i === 0 ? 3 : 0\n        };\n      })\n    }\n  ];\n}\n","import { Router, RouterConfiguration } from 'aurelia-router';\n// import '../../styles.css';\n\nexport class App {\n  public router: Router;\n\n  public configureRouter(config: RouterConfiguration, router: Router) {\n    config.map([\n      { route: ['', 'dummy'], name: 'dummy', moduleId: 'demo/dummy', nav: true, title: 'Dummy' }/*,\n      { route: ['', 'advanced'], name: 'advanced', moduleId: '/advanced', nav: true, title: 'Advanced' },\n      { route: 'simple-y', name: 'simple-y', moduleId: '/simple-y', nav: true, title: 'Simple - Y' },\n      { route: 'simple-xy', name: 'simple-xy', moduleId: '/simple-xy', nav: true, title: 'Simple - XY' }*/\n    ]);\n    this.router = router;\n  }\n}\n","export class Dummy {}\n","export class SimpleXY {\n  public items = Array.from(Array(16), (_, i) => i).map((i) => ({ img: `https://github.com/identicons/${i}.png` }));\n}\n","export class SimpleY {\n  public items = [{\n    name: `Lorem ipsum dolor sit amet, mutat ocurreret voluptaria vis et, alii quodsi incorrupte vis in. Eos debet persius pericula ei, in has posse suscipiantur, ius.`,\n    img: `http://lorempixel.com/48/48/sports/1`\n  }, {\n    name: `Lorem ipsum dolor sit amet, cibo ubique ei vim. Pro an porro repudiare sadipscing, vis at mazim detraxit. Cum et solum adipisci persequeris, ex delectus.`,\n    img: `http://lorempixel.com/48/48/sports/2`\n  }, {\n    name: `Lorem ipsum dolor sit amet, eu pro malis vitae, pro no sumo justo blandit. Doming oblique disputationi ex duo, an.`,\n    img: `http://lorempixel.com/48/48/sports/3`\n  }, {\n    name: `Lorem ipsum dolor sit amet, pri ad tacimates forensibus, aperiri meliore mea cu. Vix lucilius imperdiet democritum ne, ut elitr gubergren eam, per at incorrupte reprehendunt. Mnesarchum dissentiunt vis ne.`,\n    img: `http://lorempixel.com/48/48/sports/4`\n  }, {\n    name: `Lorem ipsum dolor sit amet, augue semper nostrum eam id.`,\n    img: `http://lorempixel.com/48/48/sports/5`\n  }];\n}\n","import {resolver, Container} from 'aurelia-dependency-injection';\n\n@resolver()\nexport class OptionalParent {\n  constructor(private key: Function | string) {}\n\n  public get(container: Container) {\n    if (container.parent && container.parent.hasResolver(this.key, true)) {\n      return container.parent.get(this.key);\n    }\n    return null;\n  }\n\n  public static of(key: Function | string) {\n    return new OptionalParent(key);\n  }\n}\n","import { FrameworkConfiguration } from 'aurelia-framework';\nimport { PLATFORM } from 'aurelia-pal';\n\nexport function configure(config: FrameworkConfiguration) {\n  config.globalResources(PLATFORM.moduleName('./sortable'));\n}\n","import { DOM } from 'aurelia-pal';\nimport { customAttribute, bindable } from 'aurelia-templating';\nimport { Repeat } from 'aurelia-templating-resources';\nimport { inject } from 'aurelia-dependency-injection';\nimport { oribella, Swipe, matchesSelector, RETURN_FLAG, Point, DefaultListenerArgs } from 'oribella';\nimport { OptionalParent } from './optional-parent';\nimport { utils, SortableItemElement, SortableElement, DragClone, Rect, PageScrollOffset, AxisFlag, LockedFlag, MoveFlag } from './utils';\nimport { AutoScroll } from './auto-scroll';\n\nexport const SORTABLE = 'oa-sortable';\nexport const SORTABLE_ATTR = `[${SORTABLE}]`;\nexport const SORTABLE_ITEM = 'oa-sortable-item';\nexport const SORTABLE_ITEM_ATTR = `[${SORTABLE_ITEM}]`;\n\ndeclare module 'aurelia-templating-resources' {\n  export interface Repeat {\n    viewFactory: {\n      isCaching: boolean;\n      setCacheSize: (first: number | string, second: boolean) => void;\n    };\n  }\n}\n\n@customAttribute(SORTABLE)\n@inject(DOM.Element, OptionalParent.of(Sortable), AutoScroll)\nexport class Sortable {\n  @bindable public items: any = [];\n  @bindable public scroll: string | Element = 'document';\n  @bindable public scrollSpeed: number = 10;\n  @bindable public scrollSensitivity: number = 10;\n  @bindable public axis: string = AxisFlag.XY;\n  @bindable public onStop: () => void = () => { };\n  @bindable public dragClass: string = 'oa-drag';\n  @bindable public dragZIndex: number = 1;\n  @bindable public disallowedDragSelectors: string[] = ['INPUT', 'SELECT', 'TEXTAREA'];\n  @bindable public allowedDragSelector: string = '';\n  @bindable public allowedDragSelectors: string[] = [];\n  @bindable public allowDrag = ({ evt }: { evt: Event, item: SortableItem }) => {\n    const target = (evt.target as HTMLElement);\n    if (this.allowedDragSelector &&\n      !matchesSelector(target, this.allowedDragSelector)) {\n      return false;\n    }\n    if (this.allowedDragSelectors.length &&\n      this.allowedDragSelectors.filter((selector) => matchesSelector(target, selector)).length === 0) {\n      return false;\n    }\n    if (this.disallowedDragSelectors.filter((selector) => matchesSelector(target, selector)).length !== 0) {\n      return false;\n    }\n    if (target.isContentEditable) {\n      return false;\n    }\n    return true;\n  }\n  @bindable public typeFlag: number = 1;\n\n  public dragClone: DragClone = {\n    parent: window.document.body,\n    viewModel: null,\n    element: null,\n    offset: new Point(0, 0),\n    position: new Point(0, 0),\n    width: 0,\n    height: 0,\n    display: null\n  };\n  public sortableDepth: number = -1;\n  public isDisabled: boolean = false;\n  public selector: string = SORTABLE_ITEM_ATTR;\n\n  private scrollListener: Element | Document;\n  private removeListener: () => void;\n  private downClientPoint: Point = new Point(0, 0);\n  private currentClientPoint: Point = new Point(0, 0);\n  private boundaryRect: Rect;\n  private scrollRect: Rect;\n  private rootSortable: Sortable;\n  private rootSortableRect: Rect;\n  private childSortables: Sortable[] = [];\n  private lastElementFromPointRect: Rect;\n\n  constructor(public element: Element, public parentSortable: Sortable, private autoScroll: AutoScroll) {\n    this.sortableDepth = utils.getSortableDepth(this);\n  }\n\n  public activate() {\n    this.removeListener = oribella.on(Swipe, this.element, this as any);\n    const { scrollElement, scrollListener } = utils.ensureScroll(this.scroll, this.element);\n    this.scroll = scrollElement;\n    this.scrollListener = scrollListener;\n    this.scrollListener.addEventListener('scroll', this as any, false);\n  }\n  public deactivate() {\n    this.removeListener();\n    this.scrollListener.removeEventListener('scroll', this as any, false);\n  }\n  public handleEvent() {\n    utils.updateDragClone(this.dragClone, this.currentClientPoint, window, this.axis);\n    this.tryMove(this.currentClientPoint, window);\n  }\n  public attached() {\n    this.activate();\n  }\n  public detached() {\n    this.deactivate();\n  }\n  private tryScroll(client: Point) {\n    const scrollElement = this.scroll as Element;\n    const { scrollLeft, scrollTop, scrollWidth, scrollHeight } = scrollElement;\n    const scrollSpeed = this.scrollSpeed;\n    const scrollMaxPos = utils.getScrollMaxPos(this.element, this.rootSortableRect, scrollElement, { scrollLeft, scrollTop, scrollWidth, scrollHeight }, this.scrollRect, window);\n    const scrollDirection = utils.getScrollDirection(this.axis, this.scrollSensitivity, client, this.boundaryRect);\n    scrollMaxPos.x = scrollDirection.x === -1 ? 0 : scrollMaxPos.x;\n    scrollMaxPos.y = scrollDirection.y === -1 ? 0 : scrollMaxPos.y;\n    const scrollFrames = utils.getScrollFrames(scrollDirection, scrollMaxPos, { scrollLeft, scrollTop }, scrollSpeed);\n    this.autoScroll.activate({ scrollElement, scrollDirection, scrollFrames, scrollSpeed });\n  }\n  private tryMove(point: Point, scrollOffset: PageScrollOffset) {\n    if (utils.canThrottle(this.lastElementFromPointRect, point, scrollOffset)) {\n      return;\n    }\n    const element = utils.elementFromPoint(point, this.selector, this.element, this.dragClone, this.axis);\n    if (!element) {\n      return;\n    }\n    const vm = utils.getViewModel(element as SortableItemElement);\n    const moveFlag = utils.move(this.dragClone, vm);\n    if (moveFlag === MoveFlag.Valid) {\n      this.lastElementFromPointRect = element.getBoundingClientRect();\n    }\n    if (moveFlag === MoveFlag.ValidNewList) {\n      this.lastElementFromPointRect = { left: 0, top: 0, right: 0, bottom: 0, width: 0, height: 0 };\n    }\n  }\n  private trySort(point: Point, scrollOffset: PageScrollOffset) {\n    utils.hideDragClone(this.dragClone);\n    this.tryMove(point, scrollOffset);\n    utils.showDragClone(this.dragClone);\n  }\n  private isLockedFrom(fromVM: SortableItem): boolean {\n    return typeof fromVM.lockedFlag === 'number' && (fromVM.lockedFlag & LockedFlag.From) !== 0;\n  }\n  private isClosestSortable(target: Node): boolean {\n    const closest = utils.closest(target, SORTABLE_ATTR, window.document);\n    return closest === this.element;\n  }\n  private initDragState(client: Point, element: Element, fromVM: SortableItem) {\n    this.downClientPoint = client;\n    this.scrollRect = (this.scroll as Element).getBoundingClientRect();\n    this.rootSortable = utils.getRootSortable(this);\n    this.rootSortableRect = this.rootSortable.element.getBoundingClientRect();\n    this.childSortables = utils.getChildSortables(this.rootSortable);\n    this.childSortables.forEach((s) => s.isDisabled = (this.sortableDepth !== s.sortableDepth || (fromVM.typeFlag & s.typeFlag) === 0));\n    this.boundaryRect = utils.getBoundaryRect(this.rootSortableRect, window);\n    this.lastElementFromPointRect = element.getBoundingClientRect();\n  }\n  public down({ evt, data: { pointers: [{ client }] }, target }: DefaultListenerArgs) {\n    if (!this.isClosestSortable(evt.target as Node)) {\n      return RETURN_FLAG.REMOVE;\n    }\n    const fromVM = utils.getViewModel(target as SortableItemElement);\n    const item = fromVM.item;\n    if (!this.isLockedFrom(fromVM) && this.allowDrag({ evt, item })) {\n      evt.preventDefault();\n      this.initDragState(client, target, fromVM);\n      return RETURN_FLAG.IDLE;\n    }\n    return RETURN_FLAG.REMOVE;\n  }\n  public start({ data: { pointers: [{ client }] }, target }: DefaultListenerArgs) {\n    utils.addDragClone(this.dragClone, this.element as HTMLElement, this.scroll as Element, target as HTMLElement, this.downClientPoint, this.dragZIndex, window);\n    this.tryScroll(client);\n  }\n  public update({ data: { pointers: [{ client }] } }: DefaultListenerArgs) {\n    this.currentClientPoint = client;\n    utils.updateDragClone(this.dragClone, client, window, this.axis);\n    this.trySort(client, window);\n    this.tryScroll(client);\n  }\n  public stop() {\n    utils.removeDragClone(this.dragClone);\n    this.autoScroll.deactivate();\n    this.childSortables.forEach((s) => s.isDisabled = false);\n    this.onStop();\n  }\n}\n\n@customAttribute(SORTABLE_ITEM)\n@inject(DOM.Element, Repeat)\nexport class SortableItem {\n  @bindable public item: any = null;\n  @bindable public typeFlag: number = 1;\n  @bindable public lockedFlag: number = 0;\n  public parentSortable: Sortable | null;\n  public childSortable: Sortable | null;\n\n  constructor(public element: Element, repeat: Repeat) {\n    if (!repeat.viewFactory.isCaching) {\n      repeat.viewFactory.setCacheSize('*', true);\n    }\n  }\n  private getParentSortable(): Sortable | null {\n    const parent = utils.closest((this.element as Node).parentNode, SORTABLE_ATTR, window.document);\n    return parent && (parent as SortableElement).au[SORTABLE].viewModel;\n  }\n  private getChildSortable(): Sortable | null {\n    const child = this.element.querySelector(SORTABLE_ATTR);\n    return child && (child as SortableElement).au[SORTABLE].viewModel;\n  }\n  public attached() {\n    this.parentSortable = this.getParentSortable();\n    this.childSortable = this.getChildSortable();\n  }\n  get lockedFrom() {\n    return (this.lockedFlag & LockedFlag.From) !== 0;\n  }\n  get lockedTo() {\n    return (this.lockedFlag & LockedFlag.To) !== 0;\n  }\n}\n","import { Point, matchesSelector } from 'oribella-framework';\nimport { Sortable, SortableItem, SORTABLE, SORTABLE_ITEM, SORTABLE_ATTR } from './sortable';\n\nexport type SortableItemElement = HTMLElement & { au: { [index: string]: { viewModel: SortableItem } } };\nexport type SortableElement = HTMLElement & { au: { [index: string]: { viewModel: Sortable } } };\n\n// tslint:disable-next-line:no-empty-interface\nexport interface AxisFlag {\n}\nexport const AxisFlag = {\n  X: 'x' as 'x',\n  Y: 'y' as 'y',\n  XY: '' as ''\n};\n\nexport enum LockedFlag {\n  From = 1,\n  To = 2,\n  FromTo = 3\n}\n\nexport enum MoveFlag {\n  Invalid = 0,\n  Valid = 1,\n  ValidNewList = 2\n}\n\nexport interface WindowDimension {\n  innerWidth: number;\n  innerHeight: number;\n}\n\nexport interface Rect {\n  left: number;\n  top: number;\n  right: number;\n  bottom: number;\n  width: number;\n  height: number;\n}\n\nexport interface PageScrollOffset {\n  pageXOffset: number;\n  pageYOffset: number;\n}\n\nexport interface ScrollOffset {\n  scrollLeft: number;\n  scrollTop: number;\n}\n\nexport interface ScrollRect {\n  scrollLeft: number;\n  scrollTop: number;\n  scrollWidth: number;\n  scrollHeight: number;\n}\n\nexport interface ScrollDirection {\n  x: number;\n  y: number;\n}\n\nexport interface ScrollDimension {\n  scrollWidth: number;\n  scrollHeight: number;\n}\n\nexport interface ScrollFrames {\n  x: number;\n  y: number;\n}\n\nexport interface ScrollData {\n  scrollElement: Element;\n  scrollDirection: ScrollDirection;\n  scrollFrames: ScrollFrames;\n  scrollSpeed: number;\n}\n\nexport interface DragClone {\n  parent: HTMLElement;\n  viewModel: SortableItem | null;\n  element: HTMLElement | null;\n  offset: Point;\n  position: Point;\n  width: number;\n  height: number;\n  display: string | null;\n};\n\nexport const utils = {\n  hideDragClone(dragClone: DragClone) {\n    const element = dragClone.element as HTMLElement;\n    dragClone.display = element.style.display;\n    element.style.display = 'none';\n  },\n  showDragClone(dragClone: DragClone) {\n    const element = dragClone.element as HTMLElement;\n    element.style.display = dragClone.display;\n  },\n  closest(node: Node | null, selector: string, rootNode: Node) {\n    while (node && node !== rootNode && node !== document) {\n      if (matchesSelector(node, selector)) {\n        return node;\n      }\n      node = node.parentNode;\n    }\n    return null;\n  },\n  getViewModel(element: SortableItemElement): SortableItem {\n    return element.au[SORTABLE_ITEM].viewModel;\n  },\n  move(dragClone: DragClone, toVM: SortableItem): number {\n    let changedToSortable = false;\n    const fromVM = dragClone.viewModel;\n    if (!fromVM) {\n      return MoveFlag.Invalid;\n    }\n    if (typeof toVM.lockedFlag === 'number' && (toVM.lockedFlag & LockedFlag.To) !== 0) {\n      return MoveFlag.Invalid;\n    }\n    const fromSortable = fromVM.parentSortable;\n    if (!fromSortable) {\n      return MoveFlag.Invalid;\n    }\n    let toSortable = toVM.parentSortable;\n    if (!toSortable) {\n      return MoveFlag.Invalid;\n    }\n    const fromItem = fromVM.item;\n    const toItem = toVM.item;\n    if (toVM.childSortable && fromSortable.sortableDepth !== toSortable.sortableDepth) {\n      if (fromSortable.sortableDepth !== toVM.childSortable.sortableDepth) {\n        return MoveFlag.Invalid;\n      }\n      toSortable = toVM.childSortable;\n      changedToSortable = true;\n    }\n    if (fromVM.parentSortable !== toSortable && (fromVM.typeFlag & toSortable.typeFlag) === 0) {\n      return MoveFlag.Invalid;\n    }\n    if (fromSortable.sortableDepth !== toSortable.sortableDepth) {\n      return MoveFlag.Invalid;\n    }\n    const fromItems = fromSortable.items;\n    const fromIx = fromItems.indexOf(fromItem);\n    const toItems = toSortable.items;\n    let toIx = toItems.indexOf(toItem);\n    if (toIx === -1) {\n      toIx = 0;\n    }\n    const removedFromItem = fromItems.splice(fromIx, 1)[0];\n    toItems.splice(toIx, 0, removedFromItem);\n    if (changedToSortable) {\n      fromVM.parentSortable = toSortable;\n      return MoveFlag.ValidNewList;\n    }\n    return MoveFlag.Valid;\n  },\n  pointInside({ top, right, bottom, left }: Rect, { x, y }: Point) {\n    return x >= left &&\n      x <= right &&\n      y >= top &&\n      y <= bottom;\n  },\n  elementFromPoint({ x, y }: Point, selector: string, sortableElement: Element, dragClone: DragClone, axisFlag: AxisFlag) {\n    if (axisFlag === AxisFlag.X) {\n      y = dragClone.position.y + dragClone.height / 2;\n    }\n    if (axisFlag === AxisFlag.Y) {\n      x = dragClone.position.x + dragClone.width / 2;\n    }\n    let element = document.elementFromPoint(x, y);\n    if (!element) {\n      return null;\n    }\n    element = utils.closest(element, selector, sortableElement) as Element;\n    if (!element) {\n      return null;\n    }\n    return element;\n  },\n  canThrottle(lastElementFromPointRect: Rect, { x, y }: Point, { pageXOffset, pageYOffset }: PageScrollOffset) {\n    return lastElementFromPointRect &&\n      utils.pointInside(lastElementFromPointRect, { x: x + pageXOffset, y: y + pageYOffset } as Point);\n  },\n  addDragClone(dragClone: DragClone, sortableElement: HTMLElement, scrollElement: Element, target: HTMLElement, client: Point, dragZIndex: number, { pageXOffset, pageYOffset }: PageScrollOffset) {\n    const targetRect = target.getBoundingClientRect();\n    const offset = { left: 0, top: 0 };\n    if (sortableElement.contains(scrollElement)) {\n      while (sortableElement.offsetParent) {\n        const offsetParentRect = sortableElement.offsetParent.getBoundingClientRect();\n        offset.left += offsetParentRect.left;\n        offset.top += offsetParentRect.top;\n        sortableElement = sortableElement.offsetParent as HTMLElement;\n      }\n    }\n    dragClone.width = targetRect.width;\n    dragClone.height = targetRect.height;\n    dragClone.viewModel = utils.getViewModel(target as SortableItemElement);\n    dragClone.element = target.cloneNode(true) as HTMLElement;\n    dragClone.element.style.position = 'absolute';\n    dragClone.element.style.width = targetRect.width + 'px';\n    dragClone.element.style.height = targetRect.height + 'px';\n    dragClone.element.style.pointerEvents = 'none';\n    dragClone.element.style.margin = 0 + '';\n    dragClone.element.style.zIndex = dragZIndex + '';\n    dragClone.position.x = targetRect.left + pageXOffset - offset.left;\n    dragClone.position.y = targetRect.top + pageYOffset - offset.top;\n    dragClone.offset.x = dragClone.position.x - client.x - pageXOffset;\n    dragClone.offset.y = dragClone.position.y - client.y - pageYOffset;\n    dragClone.element.style.left = dragClone.position.x + 'px';\n    dragClone.element.style.top = dragClone.position.y + 'px';\n    dragClone.parent.appendChild(dragClone.element);\n  },\n  updateDragClone(dragClone: DragClone, currentClientPoint: Point, { pageXOffset, pageYOffset }: PageScrollOffset, axisFlag: string) {\n    if (!dragClone.element) {\n      return;\n    }\n    if (axisFlag === AxisFlag.X || axisFlag === AxisFlag.XY) {\n      dragClone.position.x = currentClientPoint.x + dragClone.offset.x + pageXOffset;\n    }\n    if (axisFlag === AxisFlag.Y || axisFlag === AxisFlag.XY) {\n      dragClone.position.y = currentClientPoint.y + dragClone.offset.y + pageYOffset;\n    }\n\n    dragClone.element.style.left = dragClone.position.x + 'px';\n    dragClone.element.style.top = dragClone.position.y + 'px';\n  },\n  removeDragClone(dragClone: DragClone) {\n    if (!dragClone.element) {\n      return;\n    }\n    dragClone.parent.removeChild(dragClone.element);\n    dragClone.element = null;\n    dragClone.viewModel = null;\n  },\n  ensureScroll(scroll: string | Element, sortableElement: Element): { scrollElement: Element, scrollListener: Element | Document } {\n    let scrollElement = sortableElement;\n    let scrollListener: Element | Document = sortableElement;\n    if (typeof scroll === 'string') {\n      if (scroll === 'document') {\n        scrollElement = document.scrollingElement || document.documentElement || document.body;\n        scrollListener = document;\n      } else {\n        scrollElement = utils.closest(sortableElement, scroll, window.document) as Element;\n        scrollListener = scrollElement;\n      }\n    }\n    return { scrollElement, scrollListener };\n  },\n  getBoundaryRect({ left, top, right, bottom }: Rect, { innerWidth, innerHeight }: WindowDimension): Rect {\n    return {\n      left: Math.max(0, left),\n      top: Math.max(0, top),\n      right: Math.min(innerWidth, right),\n      bottom: Math.min(innerHeight, bottom),\n      get width() {\n        return this.right - this.left;\n      },\n      get height() {\n        return this.bottom - this.top;\n      }\n    };\n  },\n  getScrollDirection(axisFlag: string, scrollSensitivity: number, { x, y }: Point, { left, top, right, bottom }: Rect): ScrollDirection {\n    const direction: ScrollDirection = { x: 0, y: 0 };\n    if (x >= right - scrollSensitivity) {\n      direction.x = 1;\n    } else if (x <= left - scrollSensitivity) {\n      direction.x = -1;\n    }\n    if (y >= bottom - scrollSensitivity) {\n      direction.y = 1;\n    } else if (y <= top - scrollSensitivity) {\n      direction.y = -1;\n    }\n    if (axisFlag === AxisFlag.X) {\n      direction.y = 0;\n    }\n    if (axisFlag === AxisFlag.Y) {\n      direction.x = 0;\n    }\n    return direction;\n  },\n  getScrollMaxPos(sortableElement: Element, sortableRect: Rect, scrollElement: Element, { scrollLeft, scrollTop, scrollWidth, scrollHeight }: ScrollRect, scrollRect: Rect, { innerWidth, innerHeight }: WindowDimension): Point {\n    if (sortableElement.contains(scrollElement)) {\n      return new Point(scrollWidth - scrollRect.width, scrollHeight - scrollRect.height);\n    } else {\n      return new Point(sortableRect.right + scrollLeft - innerWidth, sortableRect.bottom + scrollTop - innerHeight);\n    }\n  },\n  getScrollFrames(direction: ScrollDirection, maxPos: Point, { scrollLeft, scrollTop }: ScrollOffset, scrollSpeed: number): ScrollFrames {\n    let x = Math.max(0, Math.ceil(Math.abs(maxPos.x - scrollLeft) / scrollSpeed));\n    let y = Math.max(0, Math.ceil(Math.abs(maxPos.y - scrollTop) / scrollSpeed));\n    if (direction.x === 1 && scrollLeft >= maxPos.x ||\n      direction.x === -1 && scrollLeft === 0) {\n      x = 0;\n    }\n    if (direction.y === 1 && scrollTop >= maxPos.y ||\n      direction.y === -1 && scrollTop === 0) {\n      y = 0;\n    }\n    return new Point(x, y);\n  },\n  getSortableDepth(sortable: Sortable) {\n    let depth = 0;\n    while (sortable.parentSortable) {\n      ++depth;\n      sortable = sortable.parentSortable;\n    }\n    return depth;\n  },\n  getRootSortable(sortable: Sortable) {\n    while (sortable.parentSortable) {\n      sortable = sortable.parentSortable;\n    }\n    return sortable;\n  },\n  getChildSortables(rootSortable: Sortable) {\n    const elements = rootSortable.element.querySelectorAll(`${SORTABLE_ATTR}`);\n    return Array.from(elements).map((e) => (e as SortableElement).au[SORTABLE].viewModel);\n  }\n};\n"]}